# pdf_generator
Развернуть проект
```
docker-compose build
docker-compose up
```
Иногда может возникнуть ошибка при выполнении docker-compose build в сообщении будет говориться про tar archieve,
я не смог ее регулярно воспроизводить, но она фиксилась добавлением `sudo` к команде.

Использовать проект
```
1)Открыть localhost
2)Profit!
3)Pdf открывается в новой вкладке, и браузер может заблочить эту вкладку
```


Следующие шаги и то что можно/нужно сделать дальше:
```
1)Для генерации PDF я использую weasyprint у которого как-то не очень
получается рендерить некоторые сайты.Я некоторое время потратил на изучение альтернатив 
и пробовал поюзать `pdfkit` - https://pypi.org/project/pdfkit 
но видимо у решений использующих под собой `wkhtmltopdf` есть нерешенные проблемы с 
загрузкой статического/медиа контента(`ContentNotFoundError`) - https://github.com/wkhtmltopdf/wkhtmltopdf/issues/2051
Соответственно можно было бы найти другую альтернативу, либо пробовать сначала сгенерить `pdfkit` а потом wkhtmltopdf ...
2)Оптимизация записи файла на диск; сейчас используются `TemporaryUploadedFile` и `InMemoryUploadedFile` классы https://docs.djangoproject.com/en/2.1/ref/files/uploads/
соответственно идеальный расклад написать кастомный `upload handler` который будет отправлять файлы на условный 
Amazon EFS.В данный момент
я заюзал default_storage чтобы была возможность легко интегрироваться с EFS и это даст возможность
масштабироваться путем увелечения кол-ва инстансов.
3)Тесты на скорую руку не оч понятные получились.Надо замокать замокать реальну генерацию пдф когда мы тестируем апи.
```
